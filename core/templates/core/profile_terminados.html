{% extends 'core/base.html' %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div style="text-align: center; margin-bottom: 2rem;">
    <h1 style="font-size: 2.5rem; margin-bottom: 1rem; color: #00ff88;">
        ‚úÖ Juegos Terminados
    </h1>
    <p style="color: #999; font-size: 1.1rem;">
        Has completado {{ juegos_terminados.count }} juegos
    </p>
</div>

<div class="grid grid-4">
    {% for juego, game_detail in juegos_con_detalles %}
        <div class="card" style="text-align: center; cursor: pointer;" onclick="window.location.href='/game/{{ juego.game_id }}/'">
            {% if game_detail and game_detail.cover %}
                <img src="https:{{ game_detail.cover.url }}" alt="{{ game_detail.name }}" 
                     style="width: 100%; height: 200px; object-fit: cover; border-radius: 10px; margin-bottom: 1rem;">
            {% else %}
                <div style="width: 100%; height: 200px; background: #333; border-radius: 10px; margin-bottom: 1rem; display: flex; align-items: center; justify-content: center; color: #666;">
                    üì∏ Sin Car√°tula
                </div>
            {% endif %}
            
            <h4>{{ game_detail.name|default:"Juego #"|add:juego.game_id }}</h4>
            
            {% if game_detail and game_detail.genres %}
                <p style="color: #999; font-size: 0.8rem; margin-bottom: 0.5rem;">
                    {% for genre in game_detail.genres %}{{ genre.name }}{% if not forloop.last %}, {% endif %}{% endfor %}
                </p>
            {% endif %}
            
            {% if juego.nota %}
                <div style="margin: 0.5rem 0;">{% for i in ''|center:juego.nota %}‚≠ê{% endfor %}</div>
            {% endif %}
            
            <p style="color: #999; font-size: 0.9rem;">{{ juego.fecha_modificacion|date:"d M Y" }}</p>
            
            {% if juego.resena %}
                <p style="color: #ccc; font-size: 0.8rem; margin-top: 0.5rem; line-height: 1.3;">
                    "{{ juego.resena|truncatewords:10 }}"
                </p>
            {% endif %}
        </div>
    {% empty %}
        <div style="grid-column: 1/-1; text-align: center; padding: 3rem; color: #666;">
            <p style="font-size: 1.2rem;">No tienes juegos terminados a√∫n</p>
            <p style="margin-top: 0.5rem;">¬°Completa tu primer juego y comparte tu experiencia!</p>
            <div style="margin-top: 2rem;">
                <a href="{% url 'home' %}" class="btn">üîç Buscar Juegos</a>
            </div>
        </div>
    {% endfor %}
</div>

<div style="text-align: center; margin-top: 3rem;">
    <a href="{% url 'profile' %}" style="color: #00ff88; text-decoration: none; font-size: 1.1rem;">
        ‚Üê Volver a mi Perfil
    </a>
</div>
{% endblock %}
