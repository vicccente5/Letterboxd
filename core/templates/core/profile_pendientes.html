{% extends 'core/base.html' %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div style="text-align: center; margin-bottom: 2rem;">
    <h1 style="font-size: 2.5rem; margin-bottom: 1rem; color: #ffa726;">
        ğŸ“‹ Mi Backlog (Pendientes)
    </h1>
    <p style="color: #999; font-size: 1.1rem;">
        Tienes {{ juegos_pendientes.count }} juegos en tu lista de deseos
    </p>
</div>

<div class="grid grid-4">
    {% for juego in juegos_pendientes %}
        <div class="card" style="text-align: center; cursor: pointer;" onclick="window.location.href='/game/{{ juego.game_id }}/'">
            {% if juego.game_id in games_details %}
                {% with game=games_details|lookup:juego.game_id %}
                    {% if game.cover %}
                        <img src="https:{{ game.cover.url }}" alt="{{ game.name }}" 
                             style="width: 100%; height: 200px; object-fit: cover; border-radius: 10px; margin-bottom: 1rem;">
                    {% else %}
                        <div style="width: 100%; height: 200px; background: #333; border-radius: 10px; margin-bottom: 1rem; display: flex; align-items: center; justify-content: center; color: #666;">
                            ğŸ“¸ Sin CarÃ¡tula
                        </div>
                    {% endif %}
                    <h4>{{ game.name }}</h4>
                    {% if game.genres %}
                        <p style="color: #999; font-size: 0.8rem; margin-bottom: 0.5rem;">
                            {% for genre in game.genres %}{{ genre.name }}{% if not forloop.last %}, {% endif %}{% endfor %}
                        </p>
                    {% endif %}
                    {% if game.rating %}
                        <p style="color: #ffa726; font-size: 0.9rem;">â­ {{ game.rating|floatformat:1 }}/100</p>
                    {% endif %}
                {% endwith %}
            {% else %}
                <div style="width: 100%; height: 200px; background: #333; border-radius: 10px; margin-bottom: 1rem; display: flex; align-items: center; justify-content: center; color: #666;">
                    ğŸ“¸ Cargando...
                </div>
                <h4>Juego #{{ juego.game_id }}</h4>
            {% endif %}
            
            <p style="color: #999; font-size: 0.9rem;">Agregado {{ juego.fecha_creacion|date:"d M Y" }}</p>
            
            {% if juego.resena %}
                <p style="color: #ccc; font-size: 0.8rem; margin-top: 0.5rem; line-height: 1.3;">
                    "{{ juego.resena|truncatewords:10 }}"
                </p>
            {% endif %}
        </div>
    {% empty %}
        <div style="grid-column: 1/-1; text-align: center; padding: 3rem; color: #666;">
            <p style="font-size: 1.2rem;">Tu backlog estÃ¡ vacÃ­o</p>
            <p style="margin-top: 0.5rem;">Â¡Agrega juegos a tu lista de deseos!</p>
            <div style="margin-top: 2rem;">
                <a href="{% url 'home' %}" class="btn">ğŸ” Buscar Juegos</a>
            </div>
        </div>
    {% endfor %}
</div>

<div style="text-align: center; margin-top: 3rem;">
    <a href="{% url 'profile' %}" style="color: #ffa726; text-decoration: none; font-size: 1.1rem;">
        â† Volver a mi Perfil
    </a>
</div>
{% endblock %}
